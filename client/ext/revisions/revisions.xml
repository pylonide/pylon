<a:application xmlns:a="http://ajax.org/2005/aml">
    <a:skin id="revisions"
        src = "{require('ext/revisions/revisions').skin}"
        media-path = "/static/ext/revisions/images/" />

    <a:vbox id = "pgRevisions"
      skinset = "revisions"
      class   = "revisionsHolder"
      anchors = "0 0 0 0">
        <a:hbox height = "20" class="topbar" margin="0 0 -1 0">
            <span>File Revisions</span>
            <a:button
              height  = "20"
              onclick = "require('ext/revisions/revisions').hide() " />
        </a:hbox>
        <a:list
          id           = "lstRevisions"
          flex         = "1"
          model        = "{require('ext/revisions/revisions').model}"
          multiselect  = "false"
          autoselect   = "false"
          drag         = "false"
          drop         = "false"
          scrollbar    = "sbShared 2 2 2"
          viewport2    = "virtual"
          skin         = "revisions-list"
          bufferselect = "true"
          each         = "[revision]">
            <a:caption><?lm
                 <div class="revision-icon">{
                    if ([@restoring] != '') {
                        <div class="rev-restoration" title="Restored"></div>
                    }
                    else if ([@silentsave] != 'true') {
                        <span class="rev-usersave" title="Saved by user">U</span>
                    }
                    else {
                        <span class="rev-autosave" title="Autosave">A</span>
                    }
                }</div>
                <div class="revision-info">{
                    <div class="revision-title">[@name]</div>
                    <ul class="contributors">{
                        each ([contributors/contributor]) {
                            <li>
                                <span class="coloredSquare" 
                                  style='background-color: {require("ext/revisions/revisions").getUserColorByEmail([@email])}'>&#9632;</span>
                                <span>[@email]</span>
                            </li>
                        }
                    }</ul>
                    
                    if ([@loading_preview] == 'true' or [@loading] == 'true') {
                        <button class="btnRecover" disabled="disabled"></button>
                    }
                    else {
                        <button class="btnRecover" onclick="require('ext/revisions/revisions').loadRevision([@id], 'apply')"></button>
                    }
                }</div>
            ?></a:caption>
            <a:remove match="[revision]" />
        </a:list>
        <a:hbox edge="3 2 3 4" class="show-details">
            <a:checkbox
                skin    = "checkbox_grey"
                top     = "-25"
                right   = "10"
                checked = "{require('ext/revisions/revisions').useCompactList == false ? 'true' : 'false'}"
                label   = "Show Details"
                onafterchange = "
                    require('ext/revisions/revisions').toggleListView()
            " />
        </a:hbox>
    </a:vbox>
</a:application>
